<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Product Details | Sherry's Wholesalers</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brandGold: '#f5b301',
            brandBlue: '#1e40af'
          }
        }
      }
    }
  </script>
</head>

<body class="bg-gray-100">

<!-- NAVBAR -->
<header class="bg-white shadow sticky top-0 z-50">
  <div class="bg-brandBlue text-white py-1">
    <div class="max-w-7xl mx-auto px-4 flex justify-between text-xs">
      <span>ğŸ“ +254 710 553 678</span>
      <span>ğŸ¢ Nairobi CBD</span>
    </div>
  </div>

  <div class="max-w-7xl mx-auto px-4 py-3 flex items-center gap-4">
    <a href="index.html">
      <img src="images/logo.png" alt="Sherry's Wholesalers" class="h-10">
    </a>

    <input
      id="search-input"
      type="text"
      placeholder="Search products, brands and categories"
      class="flex-1 border rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brandGold"
    />

    <a href="help.html" class="hidden md:flex items-center gap-1 text-sm hover:text-brandGold">
      â“ Help
    </a>

    <button id="sign-in-btn" class="hidden md:flex items-center gap-1 text-sm hover:text-brandGold">
      ğŸ‘¤ Sign In
    </button>

    <a href="cart.html" class="relative">
      ğŸ›’
      <span id="cart-count" class="absolute -top-2 -right-2 bg-red-600 text-white text-xs px-1 rounded">0</span>
    </a>
  </div>

  <div class="bg-gray-50 border-t">
    <div class="max-w-7xl mx-auto px-4 py-2 flex gap-6 text-sm overflow-x-auto">
      <a href="index.html" class="whitespace-nowrap hover:text-brandGold">ğŸ  Home</a>
      <a href="deals.html" class="whitespace-nowrap hover:text-brandGold font-semibold text-red-600">ğŸ”¥ Today's Deals</a>
      <a href="category.html?category=Home%20Appliances" class="whitespace-nowrap hover:text-brandGold">Home Appliances</a>
      <a href="category.html?category=Kitchen" class="whitespace-nowrap hover:text-brandGold">Kitchen</a>
      <a href="category.html?category=Bedroom" class="whitespace-nowrap hover:text-brandGold">Bedroom</a>
      <a href="category.html?category=Living%20Room" class="whitespace-nowrap hover:text-brandGold">Living Room</a>
    </div>
  </div>
</header>

<!-- BREADCRUMB -->
<div class="bg-white border-b">
  <div class="max-w-7xl mx-auto px-4 py-3">
    <div id="breadcrumb" class="text-sm text-gray-600"></div>
  </div>
</div>

<!-- PRODUCT DETAILS -->
<main class="max-w-7xl mx-auto px-4 py-8">
  
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
    
    <!-- Product Image -->
    <div class="bg-white rounded-lg shadow p-6">
      <img id="product-image" src="" alt="" class="w-full h-96 object-contain rounded">
    </div>

    <!-- Product Info -->
    <div class="bg-white rounded-lg shadow p-6">
      <div id="product-category" class="text-sm text-brandBlue font-semibold mb-2"></div>
      <h1 id="product-name" class="text-3xl font-bold mb-4"></h1>
      
      <div class="flex items-center gap-4 mb-6">
        <span id="product-price" class="text-4xl font-bold text-brandBlue"></span>
        <span id="product-old-price" class="text-2xl text-gray-400 line-through"></span>
        <span id="discount-badge" class="bg-red-600 text-white px-3 py-1 rounded text-sm font-bold"></span>
      </div>

      <div id="savings" class="bg-green-50 border border-green-200 rounded p-3 mb-6">
        <p class="text-green-800 font-semibold"></p>
      </div>

      <div class="mb-6">
        <h3 class="font-bold mb-2">Product Details:</h3>
        <div class="space-y-2 text-sm">
          <p><strong>Category:</strong> <span id="detail-category"></span></p>
          <p><strong>Subcategory:</strong> <span id="detail-subcategory"></span></p>
          <p><strong>Product ID:</strong> <span id="detail-id"></span></p>
          <p><strong>Availability:</strong> <span class="text-green-600 font-semibold">âœ“ In Stock</span></p>
        </div>
      </div>

      <div class="mb-6">
        <h3 class="font-bold mb-2">Quantity:</h3>
        <div class="flex items-center gap-3">
          <button id="decrease-qty" class="bg-gray-200 px-4 py-2 rounded hover:bg-gray-300 font-bold">-</button>
          <input type="number" id="quantity" value="1" min="1" class="w-20 border rounded px-4 py-2 text-center font-bold">
          <button id="increase-qty" class="bg-gray-200 px-4 py-2 rounded hover:bg-gray-300 font-bold">+</button>
        </div>
      </div>

      <div class="space-y-3">
        <button id="add-to-cart-btn" class="w-full bg-brandGold text-white font-bold py-4 rounded hover:bg-yellow-600 transition text-lg">
          ğŸ›’ Add to Cart
        </button>
        <button id="buy-now-btn" class="w-full bg-green-600 text-white font-bold py-4 rounded hover:bg-green-700 transition text-lg">
          ğŸ“± Buy Now via WhatsApp
        </button>
      </div>

      <div class="mt-6 bg-blue-50 border border-blue-200 rounded p-4">
        <h3 class="font-bold mb-2 text-brandBlue">ğŸ“ Need Help?</h3>
        <p class="text-sm text-gray-700 mb-2">Contact us for product inquiries or bulk orders</p>
        <p class="text-sm"><strong>Phone:</strong> <a href="tel:+254710553678" class="text-brandBlue hover:underline">+254 710 553 678</a></p>
        <p class="text-sm"><strong>WhatsApp:</strong> <a href="https://wa.me/254710553678" class="text-green-600 hover:underline">Chat with us</a></p>
      </div>
    </div>

  </div>

  <!-- Related Products -->
  <div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-2xl font-bold mb-6">Related Products</h2>
    <div id="related-products" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
  </div>

</main>

<!-- FOOTER -->
<footer class="bg-white mt-10 p-6 text-center text-sm text-gray-600 border-t">
  <p class="font-bold text-lg mb-2">Sherry's Wholesalers</p>
  <p>ğŸ“ Nairobi CBD</p>
  <p>ğŸ“ +254 710 553 678</p>
  <p class="mt-4 text-xs">Â© 2026 Sherry's Wholesalers. All rights reserved.</p>
</footer>

<script src="js/data.js"></script>
<script src="js/cart.js"></script>

<script>
  // Get product ID from URL
  const urlParams = new URLSearchParams(window.location.search);
  const productId = parseInt(urlParams.get('id'));

  // Find product
  const product = products.find(p => p.id === productId);

  if (!product) {
    window.location.href = 'index.html';
  }

  // Calculate discount
  function getDiscount(oldPrice, newPrice) {
    return Math.round(((oldPrice - newPrice) / oldPrice) * 100);
  }

  const discount = getDiscount(product.oldPrice, product.price);
  const savings = product.oldPrice - product.price;

  // Update page
  document.title = `${product.name} | Sherry's Wholesalers`;

  // Breadcrumb
  document.getElementById('breadcrumb').innerHTML = `
    <a href="index.html" class="hover:text-brandGold">Home</a> / 
    <a href="category.html?category=${encodeURIComponent(product.category)}" class="hover:text-brandGold">${product.category}</a> / 
    <span class="text-gray-900 font-semibold">${product.name}</span>
  `;

  // Product details
  document.getElementById('product-image').src = product.image;
  document.getElementById('product-image').alt = product.name;
  document.getElementById('product-category').textContent = product.category;
  document.getElementById('product-name').textContent = product.name;
  document.getElementById('product-price').textContent = `KSh ${product.price.toLocaleString()}`;
  document.getElementById('product-old-price').textContent = `KSh ${product.oldPrice.toLocaleString()}`;
  document.getElementById('discount-badge').textContent = `-${discount}% OFF`;
  document.getElementById('savings').querySelector('p').textContent = `ğŸ’° You save KSh ${savings.toLocaleString()} on this product!`;
  document.getElementById('detail-category').textContent = product.category;
  document.getElementById('detail-subcategory').textContent = product.subcategory;
  document.getElementById('detail-id').textContent = product.id;

  // Quantity controls
  const qtyInput = document.getElementById('quantity');
  
  document.getElementById('decrease-qty').addEventListener('click', () => {
    if (qtyInput.value > 1) {
      qtyInput.value = parseInt(qtyInput.value) - 1;
    }
  });

  document.getElementById('increase-qty').addEventListener('click', () => {
    qtyInput.value = parseInt(qtyInput.value) + 1;
  });

  // Add to cart
  document.getElementById('add-to-cart-btn').addEventListener('click', () => {
    const quantity = parseInt(qtyInput.value);
    for (let i = 0; i < quantity; i++) {
      addToCart(product);
    }
  });

  // Buy now
  document.getElementById('buy-now-btn').addEventListener('click', () => {
    const quantity = parseInt(qtyInput.value);
    const total = product.price * quantity;
    
    const message = `Hello! I'd like to order:\n\nâ€¢ ${product.name}\n  Qty: ${quantity} Ã— KSh ${product.price.toLocaleString()} = KSh ${total.toLocaleString()}\n\n*Total: KSh ${total.toLocaleString()}*`;
    
    const phone = "254710553678";
    const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
    
    window.open(url, '_blank');
  });

  // Related products (same category)
  const relatedProducts = products
    .filter(p => p.category === product.category && p.id !== product.id)
    .slice(0, 4);

  const relatedContainer = document.getElementById('related-products');
  
  relatedProducts.forEach(p => {
    const disc = getDiscount(p.oldPrice, p.price);
    const div = document.createElement('div');
    div.className = 'bg-white border rounded shadow hover:shadow-lg transition cursor-pointer relative';
    div.innerHTML = `
      <span class="absolute top-2 right-2 bg-red-600 text-white text-xs px-2 py-1 rounded">
        -${disc}%
      </span>
      <img src="${p.image}" class="h-32 w-full object-cover rounded-t">
      <div class="p-3">
        <h3 class="text-sm font-semibold line-clamp-2 h-10">${p.name}</h3>
        <p class="text-brandBlue font-bold mt-2">KSh ${p.price.toLocaleString()}</p>
        <p class="text-xs line-through text-gray-400">KSh ${p.oldPrice.toLocaleString()}</p>
      </div>
    `;
    div.addEventListener('click', () => {
      window.location.href = `product.html?id=${p.id}`;
    });
    relatedContainer.appendChild(div);
  });

  // Update cart count
  updateCartCount();

  // Search
  document.getElementById('search-input').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      const query = e.target.value.trim();
      if (query) {
        window.location.href = `category.html?search=${encodeURIComponent(query)}`;
      }
    }
  });

  // Sign in
  document.getElementById('sign-in-btn').addEventListener('click', () => {
    alert('Sign in feature coming soon! For now, browse and order via WhatsApp.');
  });
</script>

</body>
</html>